(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{335:function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",(function(){return r}))},466:function(t,e,n){var r=n(14);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},481:function(t,e,n){"use strict";var r=n(10).f,o=n(129),c=n(186),l=n(43),d=n(184),f=n(185),h=n(128),v=n(188),_=n(130),m=n(8),x=n(183).fastKey,y=n(466),w=m?"_s":"size",k=function(t,e){var n,r=x(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,h){var v=t((function(t,r){d(t,v,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[w]=0,null!=r&&f(r,n,t[h],t)}));return c(v.prototype,{clear:function(){for(var t=y(this,e),data=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete data[n.i];t._f=t._l=void 0,t[w]=0},delete:function(t){var n=y(this,e),r=k(n,t);if(r){var o=r.n,c=r.p;delete n._i[r.i],r.r=!0,c&&(c.n=o),o&&(o.p=c),n._f==r&&(n._f=o),n._l==r&&(n._l=c),n[w]--}return!!r},forEach:function(t){y(this,e);for(var n,r=l(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!k(y(this,e),t)}}),m&&r(v.prototype,"size",{get:function(){return y(this,e)[w]}}),v},def:function(t,e,n){var r,o,c=k(t,e);return c?c.v=n:(t._l=c={i:o=x(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=c),r&&(r.n=c),t[w]++,"F"!==o&&(t._i[o]=c)),t},getEntry:k,setStrong:function(t,e,n){h(t,e,(function(t,n){this._t=y(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?v(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,v(1))}),n?"entries":"values",!n,!0),_(e)}}},482:function(t,e,n){"use strict";var r=n(3),o=n(7),c=n(16),l=n(186),meta=n(183),d=n(185),f=n(184),h=n(14),v=n(15),_=n(187),m=n(58),x=n(189);t.exports=function(t,e,n,y,w,k){var C=r[t],P=C,j=w?"set":"add",$=P&&P.prototype,A={},O=function(t){var e=$[t];c($,t,"delete"==t?function(a){return!(k&&!h(a))&&e.call(this,0===a?0:a)}:"has"==t?function(a){return!(k&&!h(a))&&e.call(this,0===a?0:a)}:"get"==t?function(a){return k&&!h(a)?void 0:e.call(this,0===a?0:a)}:"add"==t?function(a){return e.call(this,0===a?0:a),this}:function(a,b){return e.call(this,0===a?0:a,b),this})};if("function"==typeof P&&(k||$.forEach&&!v((function(){(new P).entries().next()})))){var I=new P,z=I[j](k?{}:-0,1)!=I,E=v((function(){I.has(1)})),S=_((function(t){new P(t)})),M=!k&&v((function(){for(var t=new P,e=5;e--;)t[j](e,e);return!t.has(-0)}));S||((P=e((function(e,n){f(e,P,t);var r=x(new C,e,P);return null!=n&&d(n,w,r[j],r),r}))).prototype=$,$.constructor=P),(E||M)&&(O("delete"),O("has"),w&&O("get")),(M||z)&&O(j),k&&$.clear&&delete $.clear}else P=y.getConstructor(e,t,w,j),l(P.prototype,n),meta.NEED=!0;return m(P,t),A[t]=P,o(o.G+o.W+o.F*(P!=C),A),k||y.setStrong(P,t,w),P}},483:function(t,e,n){var content=n(536);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("c58bc316",content,!0,{sourceMap:!1})},484:function(t,e,n){var content=n(538);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("31025dd7",content,!0,{sourceMap:!1})},485:function(t,e,n){var content=n(540);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("97b88bac",content,!0,{sourceMap:!1})},533:function(t,e,n){"use strict";var strong=n(481),r=n(466);t.exports=n(482)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return strong.def(r(this,"Set"),t=0===t?0:t,t)}},strong)},534:function(t,e,n){"use strict";var r=n(43),o=n(7),c=n(44),l=n(190),d=n(191),f=n(33),h=n(193),v=n(192);o(o.S+o.F*!n(187)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,o,_,m=c(t),x="function"==typeof this?this:Array,y=arguments.length,w=y>1?arguments[1]:void 0,k=void 0!==w,C=0,P=v(m);if(k&&(w=r(w,y>2?arguments[2]:void 0,2)),null==P||x==Array&&d(P))for(n=new x(e=f(m.length));e>C;C++)h(n,C,k?w(m[C],C):m[C]);else for(_=P.call(m),n=new x;!(o=_.next()).done;C++)h(n,C,k?l(_,w,[o.value,C],!0):o.value);return n.length=C,n}})},535:function(t,e,n){"use strict";var r=n(483);n.n(r).a},536:function(t,e,n){(e=n(11)(!1)).push([t.i,".air-column[data-v-447ec6c0]{border-bottom:1px dashed #ddd;padding-bottom:20px;margin-bottom:20px}.air-column h2[data-v-447ec6c0]{margin-bottom:20px;font-size:22px;font-weight:400}[data-v-447ec6c0] .el-select .el-input{width:130px}.input-with-select[data-v-447ec6c0]{width:590px}.input-with-select[data-v-447ec6c0] .el-input-group__prepend{background-color:#fff}.member-info[data-v-447ec6c0] .el-form-item{margin-bottom:0}.member-info-item[data-v-447ec6c0]{border-bottom:1px dashed #eee;padding-bottom:20px;position:relative}.member-info-item:first-child .delete-user[data-v-447ec6c0]{display:none}.add-member[data-v-447ec6c0]{margin-top:20px}.delete-user[data-v-447ec6c0]{display:block;background:#ddd;width:16px;height:16px;font-size:14px;text-align:center;line-height:16px;color:#fff;cursor:pointer;border-radius:50px;position:absolute;right:-30px;top:50%}.insurance>div[data-v-447ec6c0]{margin-top:10px}.insurance-item[data-v-447ec6c0]{margin-bottom:20px}.contact[data-v-447ec6c0] .el-input{width:50%}.submit[data-v-447ec6c0]{margin:50px auto;display:block;width:250px;height:50px}",""]),t.exports=e},537:function(t,e,n){"use strict";var r=n(484);n.n(r).a},538:function(t,e,n){(e=n(11)(!1)).push([t.i,".aside[data-v-074531c7]{width:350px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;border:1px solid #ddd}.air-info[data-v-074531c7]{padding:15px}.air-info .info-top[data-v-074531c7]{margin-bottom:10px}.air-info .info-top>div[data-v-074531c7]:last-child{font-size:14px}.air-info .info-step .flight-airport strong[data-v-074531c7]{display:block;font-size:22px;font-weight:400}.air-info .info-step .flight-airport span[data-v-074531c7]{font-size:12px;color:#999}.air-info .info-step .flight-time[data-v-074531c7]{text-align:center;font-size:12px;color:#999}.air-info .info-step .flight-time span[data-v-074531c7]{display:block}.info-bar[data-v-074531c7]{border-top:1px dashed #ddd;padding:10px 15px;font-size:14px;color:#666}.info-bar .price[data-v-074531c7]{font-size:28px;color:orange}",""]),t.exports=e},539:function(t,e,n){"use strict";var r=n(485);n.n(r).a},540:function(t,e,n){(e=n(11)(!1)).push([t.i,".container[data-v-0a40a02c]{width:1000px;margin:20px auto}.aside[data-v-0a40a02c]{width:350px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;border:1px solid #ddd}",""]),t.exports=e},593:function(t,e,n){"use strict";n.r(e);var r=n(335),o=(n(533),n(90),n(534),n(25),n(20),n(87),{props:{data:{type:Object,default:function(){return{insurances:{}}}}},data:function(){return{creit:"",userInfo:[{username:"",id:""}],insurances:[],contactName:"",contactPhone:"13812345612",captcha:"",invoice:!1}},computed:{totalPrice:function(){var t=this;if(!this.data.seat_infos)return"";var e=0,n=this.userInfo.length;return e+=this.data.seat_infos.org_settle_price*n,this.data.insurances.forEach((function(r){t.insurances.indexOf(r.id)>-1&&(e+=r.price*n)})),e+=this.data.airport_tax_audlet*n,this.$emit("sendAllPrice",{price:e,len:n}),e}},methods:{handleAddUsers:function(){this.userInfo.push({username:"",id:""})},handleDeleteUser:function(t){this.userInfo.splice(t,1)},handleSendCaptcha:function(){var t=this;if(!this.contactPhone)return this.$alert("手机号码不能为空","提示",{confirmButtonText:"确定",type:"warning"});if(!/^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/.test(this.contactPhone))return this.$alert("手机号码输入错误","提示",{confirmButtonText:"确定",type:"warning"});this.$store.dispatch("user/sendCaptcha",{tel:this.contactPhone}).then((function(e){var data=e.data;t.$message.success("手机验证码为模拟验真：".concat(data.code)),t.captcha="000000"}))},handleSubmit:function(){var t=this,e={users:this.userInfo,insurances:this.insurances,contactName:this.contactName,contactPhone:this.contactPhone,captcha:this.captcha,seat_xid:this.data.seat_infos.seat_xid,air:this.data.id,invoice:this.invoice},n={users:{errMessage:"用户名或者身份证不能为空",validator:function(){var t=!0;return e.users.forEach((function(e){e.username&&e.id||(t=!1)})),t}},contactName:{errMessage:"联系人姓名不能为空",validator:function(){return!!e.contactName}},contactPhone:{errMessage:"手机号不能为空",validator:function(){return!!e.contactPhone}},captcha:{errMessage:"手机验证码不能为空",validator:function(){return!!e.captcha}}},r=!0;if(Object.keys(n).forEach((function(e){r&&((r=n[e].validator())||t.$message.error(n[e].errMessage))})),r){var o=this.$store.state.user;this.$message.success("订单正在生成中，请稍等..."),this.$axios({method:"post",url:"/airorders",data:e,headers:{Authorization:"Bearer ".concat(o.userInfo.token||"")}}).then((function(e){var n=e.data.data.id;t.$router.push({path:"/air/pay",query:{id:n}})}))}},addInsuranceId:function(t){var e=this.insurances.indexOf(t);-1!==e?this.insurances.splice(e,1):this.insurances=Array.from(new Set([].concat(Object(r.a)(this.insurances),[t])))}}}),c=(n(535),n(13)),l=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("div",{staticClass:"air-column"},[n("h2",[t._v("乘机人")]),t._v(" "),n("el-form",{staticClass:"member-info"},t._l(t.userInfo,(function(e,r){return n("div",{key:r,staticClass:"member-info-item",attrs:{model:t.userInfo}},[n("el-form-item",{attrs:{label:"乘机人类型"}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"姓名"},model:{value:e.username,callback:function(n){t.$set(e,"username",n)},expression:"item.username"}},[n("el-select",{attrs:{slot:"prepend",value:"1",placeholder:"请选择"},slot:"prepend"},[n("el-option",{attrs:{label:"成人",value:"1"}})],1)],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"证件类型"}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"证件号码"},model:{value:e.id,callback:function(n){t.$set(e,"id",n)},expression:"item.id"}},[n("el-select",{attrs:{slot:"prepend",value:"1",placeholder:"请选择"},slot:"prepend"},[n("el-option",{attrs:{label:"身份证",value:"1"}})],1)],1)],1),t._v(" "),n("span",{staticClass:"delete-user",on:{click:function(e){return t.handleDeleteUser(r)}}},[t._v("-")])],1)})),0),t._v(" "),n("el-button",{staticClass:"add-member",attrs:{type:"primary"},on:{click:t.handleAddUsers}},[t._v("添加乘机人")])],1),t._v(" "),n("div",{staticClass:"air-column"},[n("h2",[t._v("保险")]),t._v(" "),n("div",t._l(t.data.insurances,(function(e,r){return n("div",{key:e.type+r,staticClass:"insurance-item"},[n("el-checkbox",{attrs:{label:e.type+"：￥"+e.price+"/份×"+t.userInfo.length+"  最高赔付"+e.compensation,border:""},on:{change:function(n){return t.addInsuranceId(e.id)}}})],1)})),0)]),t._v(" "),n("div",{staticClass:"air-column"},[n("h2",[t._v("联系人")]),t._v(" "),n("div",{staticClass:"contact"},[n("el-form",{attrs:{"label-width":"60px"}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{model:{value:t.contactName,callback:function(e){t.contactName=e},expression:"contactName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"手机"}},[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.contactPhone,callback:function(e){t.contactPhone=e},expression:"contactPhone"}},[n("template",{slot:"append"},[n("el-button",{on:{click:t.handleSendCaptcha}},[t._v("发送验证码")])],1)],2)],1),t._v(" "),n("el-form-item",{attrs:{label:"验证码"}},[n("el-input",{model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}})],1)],1),t._v(" "),n("el-button",{staticClass:"submit",attrs:{type:"warning"},on:{click:t.handleSubmit}},[t._v("提交订单")])],1)]),t._v(" "),n("input",{attrs:{type:"hidden"},domProps:{value:t.totalPrice}})])}),[],!1,null,"447ec6c0",null).exports,d=(n(131),{props:{data:{type:Object,default:{}},allPrice:{type:Object,default:{}}},computed:{rankTime:function(){if(!this.data.dep_time)return"";var t=this.data.dep_time.split(":"),e=this.data.arr_time.split(":"),sub=60*e[0]+ +e[1]-60*t[0]-+t[1];sub<0&&(sub+=1440);var n=Math.floor(sub/60),r=sub%60;return"".concat(n,"时").concat(r,"分")}}}),f=(n(537),{components:{OrderForm:l,OrderAside:Object(c.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"aside"},[n("div",{staticClass:"air-info"},[n("el-row",{staticClass:"info-top",attrs:{type:"flex",justify:"space-between"}},[n("div",[t._v(t._s(t.data.dep_date))]),t._v(" "),n("div",[t._v(t._s(t.data.org_city_name)+" - "+t._s(t.data.dst_city_name))])]),t._v(" "),n("el-row",{staticClass:"info-step",attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{staticClass:"flight-airport",attrs:{span:5}},[n("strong",[t._v(t._s(t.data.dep_time))]),t._v(" "),n("span",[t._v(t._s(t.data.org_airport_name)+t._s(t.data.org_airport_quay))])]),t._v(" "),n("el-col",{staticClass:"flight-time",attrs:{span:14}},[n("span",[t._v("--- "+t._s(t.rankTime)+" ---")]),t._v(" "),n("span",[t._v(t._s(t.data.airline_name)+t._s(t.data.flight_no))])]),t._v(" "),n("el-col",{staticClass:"flight-airport",attrs:{span:5}},[n("strong",[t._v(t._s(t.data.arr_time))]),t._v(" "),n("span",[t._v("浦东机场T2")])])],1)],1),t._v(" "),n("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between"}},[n("span",[t._v("订单总价")]),t._v(" "),n("span",[t._v("金额")]),t._v(" "),n("span",[t._v("数量")])]),t._v(" "),n("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between"}},[n("span",[t._v("成人机票")]),t._v(" "),n("span",[t._v("￥"+t._s(t.data.seat_infos&&t.data.seat_infos.org_settle_price))]),t._v(" "),n("span",[t._v("x"+t._s(t.allPrice.len))])]),t._v(" "),n("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between"}},[n("span",[t._v("机建＋燃油")]),t._v(" "),n("span",[t._v("¥"+t._s(t.data.airport_tax_audlet)+"/人/单程")]),t._v(" "),n("span",[t._v("x"+t._s(t.allPrice.len))])]),t._v(" "),n("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("span",[t._v("应付总额：")]),t._v(" "),n("span",{staticClass:"price"},[t._v("￥"+t._s(t.allPrice.price))])])],1)}),[],!1,null,"074531c7",null).exports},data:function(){return{infoData:{},allPrice:{}}},mounted:function(){var t=this,e=this.$route.query;this.$axios({url:"/airs/".concat(e.id),params:{seat_xid:e.seat_xid}}).then((function(e){var data=e.data;t.infoData=data}))},methods:{recPrice:function(data){this.allPrice=data}}}),h=(n(539),Object(c.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("el-row",{attrs:{type:"flex",justify:"space-between"}},[e("div",{staticClass:"main"},[e("OrderForm",{attrs:{data:this.infoData},on:{sendAllPrice:this.recPrice}})],1),this._v(" "),e("div",{staticClass:"aside"},[e("OrderAside",{attrs:{data:this.infoData,allPrice:this.allPrice}})],1)])],1)}),[],!1,null,"0a40a02c",null));e.default=h.exports}}]);