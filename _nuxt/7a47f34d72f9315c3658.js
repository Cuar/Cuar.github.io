(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{335:function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",(function(){return r}))},476:function(t,e,n){var content=n(524);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("9905053c",content,!0,{sourceMap:!1})},477:function(t,e,n){var content=n(526);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("c0dc1320",content,!0,{sourceMap:!1})},478:function(t,e,n){var content=n(528);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("19022cce",content,!0,{sourceMap:!1})},479:function(t,e,n){var content=n(530);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("55380118",content,!0,{sourceMap:!1})},480:function(t,e,n){var content=n(532);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(12).default)("3253782e",content,!0,{sourceMap:!1})},523:function(t,e,n){"use strict";var r=n(476);n.n(r).a},524:function(t,e,n){(e=n(11)(!1)).push([t.i,".flight-title[data-v-4caf62f1]{padding:0 15px;border:1px solid #ddd;background:#f6f6f6;height:38px;line-height:38px;color:#666;font-size:12px;margin-bottom:10px}.flight-title>div[data-v-4caf62f1]{text-align:center}",""]),t.exports=e},525:function(t,e,n){"use strict";var r=n(477);n.n(r).a},526:function(t,e,n){(e=n(11)(!1)).push([t.i,".flight-item[data-v-58f09d4e]{border:1px solid #ddd;margin-bottom:10px}.flight-item .flight-info[data-v-58f09d4e]{padding:15px;cursor:pointer}.flight-item .flight-info>div[data-v-58f09d4e]:first-child,.flight-item .flight-info>div[data-v-58f09d4e]:last-child{text-align:center}.flight-item .flight-info-center[data-v-58f09d4e]{padding:0 30px;text-align:center}.flight-item .flight-info-center .flight-airport strong[data-v-58f09d4e]{display:block;font-size:24px;font-weight:400}.flight-item .flight-info-center .flight-airport span[data-v-58f09d4e]{font-size:12px;color:#999}.flight-item .flight-info-center .flight-time span[data-v-58f09d4e]{display:inline-block;padding:10px 0;border-bottom:1px solid #eee;color:#999}.flight-item .flight-info-right .sell-price[data-v-58f09d4e]{font-size:24px;color:orange;margin:0 2px}.flight-recommend[data-v-58f09d4e]{background:#f6f6f6;border-top:1px solid #eee;padding:0 20px}.flight-recommend .flight-sell[data-v-58f09d4e]{border-bottom:1px solid #eee;padding:10px 0}.flight-recommend .flight-sell[data-v-58f09d4e]:last-child{border-bottom:none}.flight-recommend .flight-sell .flight-sell-left[data-v-58f09d4e]{font-size:12px}.flight-recommend .flight-sell .flight-sell-left span[data-v-58f09d4e]{color:green}.flight-recommend .flight-sell .price[data-v-58f09d4e]{font-size:20px;color:orange}.flight-recommend .flight-sell .choose-button[data-v-58f09d4e]{text-align:center;color:#666}.flight-recommend .flight-sell .choose-button button[data-v-58f09d4e]{display:block;width:100%;margin-bottom:5px}",""]),t.exports=e},527:function(t,e,n){"use strict";var r=n(478);n.n(r).a},528:function(t,e,n){(e=n(11)(!1)).push([t.i,".filters[data-v-1f8ce282]{margin-bottom:20px}.filters-top[data-v-1f8ce282] .el-select{margin-left:10px}.filter-cancel[data-v-1f8ce282]{margin-top:10px}",""]),t.exports=e},529:function(t,e,n){"use strict";var r=n(479);n.n(r).a},530:function(t,e,n){(e=n(11)(!1)).push([t.i,".statement[data-v-c059a8e0]{border:1px solid #ddd}.statement .statement-list[data-v-c059a8e0]{padding:10px 0}.statement .statement-list>div[data-v-c059a8e0]{text-align:center}.statement .statement-list>div i[data-v-c059a8e0]{display:block;font-size:40px}.statement .statement-list>div span[data-v-c059a8e0]{font-size:12px}.statement .service-tel[data-v-c059a8e0]{height:32px;line-height:32px;padding:0 10px;background:#f6f6f6;font-size:14px}.history[data-v-c059a8e0]{border:1px solid #ddd;padding:10px;margin-top:10px}.history h5[data-v-c059a8e0]{font-size:16px;font-weight:400;padding-bottom:10px;border-bottom:1px solid #eee}.history .history-item[data-v-c059a8e0]{padding:10px 0;font-size:14px;border-bottom:1px solid #eee}.history .history-item[data-v-c059a8e0]:last-child{border:none}.history .history-item .to-from[data-v-c059a8e0]{margin-bottom:5px}.history .history-item p[data-v-c059a8e0]{font-size:12px;color:#666}.history .history-item span[data-v-c059a8e0]{color:#fff;display:block;padding:2px 10px;background:orange;border-radius:4px;font-size:12px;cursor:pointer}",""]),t.exports=e},531:function(t,e,n){"use strict";var r=n(480);n.n(r).a},532:function(t,e,n){(e=n(11)(!1)).push([t.i,".container[data-v-07ea90ca]{width:1000px;margin:20px auto}.flights-content[data-v-07ea90ca]{width:745px;font-size:14px}.aside[data-v-07ea90ca]{width:240px}",""]),t.exports=e},589:function(t,e,n){"use strict";n.r(e);var r=n(335),l={},o=(n(523),n(13)),c=Object(o.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("el-row",{staticClass:"flight-title"},[e("el-col",{attrs:{span:5}},[this._v("航空信息")]),this._v(" "),e("el-col",{attrs:{span:14}},[e("el-row",{attrs:{type:"flex",justify:"space-between"}},[e("el-col",{attrs:{span:12}},[this._v("起飞时间")]),this._v(" "),e("el-col",{attrs:{span:12}},[this._v("到达时间")])],1)],1),this._v(" "),e("el-col",{attrs:{span:5}},[this._v("价格")])],1)}),[],!1,null,"4caf62f1",null).exports,f=(n(25),n(20),n(87),{props:{data:{type:Object,default:function(){return{}}}},data:function(){return{currentOpen:!1}},computed:{differTime:function(){var t=new Date(this.data.arr_datetime)-new Date(this.data.dep_datetime);t=t<0?+t+864e5:t;var e=Math.floor(t/864e5),n=t%864e5,r=Math.floor(n/36e5),l=n%36e5,o=Math.floor(l/6e4),c=l%6e4,f=(Math.round(c/1e3),{days:e,hours:r,minutes:o}),d=["天","时","分"];return Object.keys(f).forEach((function(t,i){f[t]>0?f[t]=f[t]+d[i]:f[t]=""})),"".concat(f.days).concat(f.hours).concat(f.minutes)}},methods:{handleClick:function(){this.currentOpen=!this.currentOpen},chooseSeat:function(t,e){this.$router.push({path:"/air/order",query:{id:t,seat_xid:e}})}}}),d=(n(525),Object(o.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flight-item"},[n("div",{on:{click:t.handleClick}},[n("el-row",{staticClass:"flight-info",attrs:{type:"flex",align:"middle"}},[n("el-col",{attrs:{span:6}},[n("span",[t._v(t._s(t.data.airline_name)+" "+t._s(t.data.flight_no))])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-row",{staticClass:"flight-info-center",attrs:{type:"flex",justify:"space-between"}},[n("el-col",{staticClass:"flight-airport",attrs:{span:8}},[n("strong",[t._v(t._s(t.data.dep_time))]),t._v(" "),n("span",[t._v(t._s(t.data.org_airport_name)+t._s(t.data.org_airport_quay))])]),t._v(" "),n("el-col",{staticClass:"flight-time",attrs:{span:8}},[n("span",[t._v(t._s(t.differTime))])]),t._v(" "),n("el-col",{staticClass:"flight-airport",attrs:{span:8}},[n("strong",[t._v(t._s(t.data.arr_time))]),t._v(" "),n("span",[t._v(t._s(t.data.dst_airport_name)+t._s(t.data.dst_airport_quay))])])],1)],1),t._v(" "),n("el-col",{staticClass:"flight-info-right",attrs:{span:6}},[t._v("\n        ￥\n        "),n("span",{staticClass:"sell-price"},[t._v(t._s(t.data.seat_infos[0].par_price))]),t._v("起\n      ")])],1)],1),t._v(" "),n("div",{staticClass:"flight-recommend"},[t.currentOpen?n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:4}},[t._v("低价推荐")]),t._v(" "),n("el-col",{attrs:{span:20}},t._l(t.data.seat_infos,(function(e,r){return n("el-row",{key:e.ota_id+r,staticClass:"flight-sell",attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{staticClass:"flight-sell-left",attrs:{span:16}},[n("span",[t._v(t._s(e.name))]),t._v("\n            | "+t._s(e.supplierName)+"\n          ")]),t._v(" "),n("el-col",{staticClass:"price",attrs:{span:5}},[t._v("￥"+t._s(e.par_price))]),t._v(" "),n("el-col",{staticClass:"choose-button",attrs:{span:3}},[n("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(n){return t.chooseSeat(t.data.id,e.seat_xid)}}},[t._v("选定")]),t._v(" "),n("p",[t._v("剩余: "+t._s(e.discount))])],1)],1)})),1)],1):t._e()],1)])}),[],!1,null,"58f09d4e",null).exports),h=(n(131),n(53)),v={props:{allData:{type:Object,default:function(){return{}}}},data:function(){return{filterData:{airport:"",flightTime:"",airCompany:"",airModel:""},sizeOptions:[{name:"大",size:"L"},{name:"中",size:"M"},{name:"小",size:"S"}]}},computed:{cityData:function(){return this.allData.info||{}},options:function(){return this.allData.options||{}}},methods:{handleFilter:function(){var t=this,e=this.allData.flights.filter((function(e){return!t.filterData.airport||e.org_airport_name===t.filterData.airport})).filter((function(e){if(t.filterData.flightTime){var n=t.filterData.flightTime.split(","),r=Object(h.a)(n,2),l=r[0],o=r[1],c=+e.dep_time.split(":")[0];return c>l&&c<o}return!0})).filter((function(e){return!t.filterData.airCompany||e.airline_name===t.filterData.airCompany})).filter((function(e){return!t.filterData.airModel||e.plane_size===t.filterData.airModel}));this.$emit("setData",e)},cacelOperation:function(){this.filterData={},this.$emit("setData",this.allData.flights)}}},m=(n(527),Object(o.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"filters"},[n("el-row",{staticClass:"filters-top",attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:8}},[t._v("\n      单程：\n      "+t._s(t.cityData.departCity)+" - "+t._s(t.cityData.destCity)+"\n      /\n      "+t._s(t.cityData.departDate)+"\n    ")]),t._v(" "),n("el-col",{attrs:{span:4}},[n("el-select",{attrs:{size:"mini",placeholder:"起飞机场"},on:{change:t.handleFilter},model:{value:t.filterData.airport,callback:function(e){t.$set(t.filterData,"airport",e)},expression:"filterData.airport"}},t._l(t.options.airport,(function(t,e){return n("el-option",{key:t+e,attrs:{label:t,value:t}})})),1)],1),t._v(" "),n("el-col",{attrs:{span:4}},[n("el-select",{attrs:{size:"mini",placeholder:"起飞时间"},on:{change:t.handleFilter},model:{value:t.filterData.flightTime,callback:function(e){t.$set(t.filterData,"flightTime",e)},expression:"filterData.flightTime"}},t._l(t.options.flightTimes,(function(t,e){return n("el-option",{key:e,attrs:{label:(t.from<10?"0"+t.from:t.from)+":00 - "+(t.to<10?"0"+t.to:t.to)+":00",value:t.from+","+t.to}})})),1)],1),t._v(" "),n("el-col",{attrs:{span:4}},[n("el-select",{attrs:{size:"mini",placeholder:"航空公司"},on:{change:t.handleFilter},model:{value:t.filterData.airCompany,callback:function(e){t.$set(t.filterData,"airCompany",e)},expression:"filterData.airCompany"}},t._l(t.options.company,(function(t,e){return n("el-option",{key:t+e,attrs:{label:t,value:t}})})),1)],1),t._v(" "),n("el-col",{attrs:{span:4}},[n("el-select",{attrs:{size:"mini",placeholder:"机型"},on:{change:t.handleFilter},model:{value:t.filterData.airModel,callback:function(e){t.$set(t.filterData,"airModel",e)},expression:"filterData.airModel"}},t._l(t.sizeOptions,(function(t,e){return n("el-option",{key:t.size+e,attrs:{label:t.name,value:t.size}})})),1)],1)],1),t._v(" "),n("div",{staticClass:"filter-cancel"},[t._v("\n    筛选：\n    "),n("el-button",{attrs:{type:"primary",size:"mini",round:"",plain:""},on:{click:t.cacelOperation}},[t._v("撤销")])],1)],1)}),[],!1,null,"1f8ce282",null).exports),_={computed:{historyList:function(){return this.$store.state.air.airHistory||[]}},data:function(){return{}},methods:{chooseHistorySearch:function(data){this.$router.push({path:"/air/flights",query:data})}}},x=(n(529),{components:{FlightsHeader:c,FlightsItem:d,FlightsFilter:m,FlightsAside:Object(o.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"aside"},[n("div",{staticClass:"statement"},[n("el-row",{staticClass:"statement-list",attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:8}},[n("i",{staticClass:"iconfont iconweibiaoti-_huabanfuben",staticStyle:{color:"#409EFF"}}),t._v(" "),n("span",[t._v("航协认证")])]),t._v(" "),n("el-col",{attrs:{span:8}},[n("i",{staticClass:"iconfont iconbaozheng",staticStyle:{color:"green"}}),t._v(" "),n("span",[t._v("出行保证")])]),t._v(" "),n("el-col",{attrs:{span:8}},[n("i",{staticClass:"iconfont icondianhua",staticStyle:{color:"#409EFF"}}),t._v(" "),n("span",[t._v("7x24")])])],1),t._v(" "),n("p",{staticClass:"service-tel"},[t._v("免费客服电话：4006345678转2")])],1),t._v(" "),n("div",{staticClass:"history"},[n("h5",[t._v("历史查询")]),t._v(" "),n("div",t._l(t.historyList,(function(e,r){return n("el-row",{key:e.departDate+r,staticClass:"history-item",attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("div",{staticClass:"air-info"},[n("div",{staticClass:"to-from"},[t._v(t._s(e.departCity)+" - "+t._s(e.destCity))]),t._v(" "),n("p",[t._v(t._s(e.departDate))])]),t._v(" "),n("span",{on:{click:function(n){return t.chooseHistorySearch(e)}}},[t._v("选择")])])})),1)])])}),[],!1,null,"c059a8e0",null).exports},data:function(){return{allData:{},cacheAllData:{},currentData:[],currentPage:1,pageSizes:5}},computed:{airList:function(){return 0===this.currentData.length?[]:this.currentData.slice((this.currentPage-1)*this.pageSizes,this.currentPage*this.pageSizes)}},methods:{getAirList:function(){var t=this;this.currentPage=1,this.$axios({url:"/airs",params:this.$route.query}).then((function(e){var data=e.data;t.allData=data,t.currentData=Object(r.a)(data.flights)}))},handleSizeChange:function(data){this.pageSizes=data},handleCurrentChange:function(data){this.currentPage=data},setData:function(t){t&&(this.currentPage=1,this.allData.total=t.length,this.currentData=t)}},watch:{$route:"getAirList"},mounted:function(){this.getAirList()}}),y=(n(531),Object(o.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"container"},[n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("div",{staticClass:"flights-content"},[n("div"),t._v(" "),n("FlightsFilter",{attrs:{allData:t.allData},on:{setData:t.setData}}),t._v(" "),n("FlightsHeader"),t._v(" "),n("div",[t._l(t.airList,(function(t,e){return n("FlightsItem",{key:t.id+e,attrs:{data:t}})})),t._v(" "),n("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,15,20],"page-size":t.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:t.allData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],2)],1),t._v(" "),n("div",{staticClass:"aside"},[n("FlightsAside")],1)])],1)}),[],!1,null,"07ea90ca",null));e.default=y.exports}}]);